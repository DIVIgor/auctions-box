{% extends "layout.html" %}

{% block title %}Active listings{% endblock title %}

{% block body %}
    <div class="basic-title">
        <h1 class="page-title">Active Listings</h1>
    </div>

    <div class="filtering-panel">
        {% comment %} <h3>Filters:</h3> {% endcomment %}
        {% comment %} <h4>Sort:</h4> {% endcomment %}

        <div class="radio">
            <label class="form-label" for="sort">Sort by:</label>
            <form id="sort" class="rad-form" action="{% url 'auctions:index' %}" method="GET">
                <input class="rad-point" type="radio" id="all" name="bid_filter" value="all" checked="checked">
                <label class="rad-label" for="all">Show all</label>
                <input class="rad-point" type="radio" id="no-bids" name="bid_filter" value='no_bids'>
                <label class="rad-label" for="no-bids">Without bids</label>
                <input class="rad-point" type="radio" id="bids" name="bid_filter" value="bids">
                <label class="rad-label" for="bids">With bids</label>

                {% comment %} <label for="slct-sort">order by:</label> {% endcomment %}
                <select class="select-ordering" name="lst_sort" id="slct-sort">
                    <option value="date_desc">Date Desc</option>
                    <option value="date_asc">Date Asc</option>
                    <option value="name">Name</option>
                    <option value="bid_asc">Bid Asc</option>
                    <option value="bid_desc">Bid Desc</option>
                </select>

                <input class="sort-btn" type="submit" value="Sort">
            </form>
        </div>
    </div>

    {% if active_listings %}
        <div class="active_listings">
            {% for listing in active_listings %}
                <a class="listing_mini" href="{{ listing.get_absolute_url }}">
                    <div class="lst-img">
                        {% if listing.image %}
                            <img class="limg" src="{{ listing.image }}" alt="{{ listing.name }}">
                        {% else %}
                            <img class="limg" src="https://media.istockphoto.com/vectors/default-image-icon-vector-missing-picture-page-for-website-design-or-vector-id1357365823?b=1&k=20&m=1357365823&s=170667a&w=0&h=y6ufWZhEt3vYWetga7F33Unbfta2oQXCZLUsEa67ydM=" alt="No image available">
                        {% endif %}
                    </div>
                    <div class="lst-name">
                        {{ listing.name }}
                    </div>
                    <div class="lst-bid">
                        {% if listing.max_bid %}
                            <small>Current bid:</small> US ${{ listing.current_bid }}
                        {% else %}
                            <small>Starting bid:</small> US ${{ listing.start_bid }}
                        {% endif %}
                    </div>
                    <div class="lst-descr">
                        <h4 class="h4-descr">Description</h4>
                        <p class="descr">
                            {{ listing.description }}
                        </p>
                    </div>
                </a>
            {% endfor %}
        </div>
    {% else %}
        Sorry, there's nothing here yet.
    {% endif %}
{% endblock %}